clear
set verbose off

if $sysinfo.hostname == "at" || $sysinfo.hostname == "atdesktop"
    string DIR_WORK = "/home/at/git/CategoryEncoders"
elif $sysinfo.hostname == "dsb"
    string DIR_WORK = "/home/ninja/repo/CategoryEncoders"
endif

include "@DIR_WORK/src/CategoryEncoders.inp" --force

open nc_crime.gdt -q --preserve

# Cross-sectional grouping variable
series unit = urban
setinfo unit --discrete

# List of regressors
list Xbase = density wcon



# One-hot encoding (aka dummifying)
list OHE = ohe_encode(unit)
print unit OHE -o --range=70:80

# Binarizer
list BIN = binarizer (Xbase, 1.1)
print Xbase BIN -o --range=70:80

# Mean encoding
list Xpmean = means_encode(Xbase, unit)
print unit Xbase Xpmean -o --range=70:80

# Median encoding
list Xpmedian = median_encode(Xbase, unit)
print unit Xbase Xpmedian -o --range=70:80

# PCA encoding with automatic mean encoding
list Xpca = pca_encode(Xbase, unit)			# means_encoding done per default
print unit Xbase Xpca -o --range=70:80

# PCA encoding without automatic mean encoding
list Xpca_wo_mean = pca_encode(Xbase, unit, , 0)
print unit Xbase Xpca_wo_mean -o --range=70:80

# SVD encoding
list Xsvd = low_rank_encode(Xbase, unit)
print unit Xbase Xsvd -o --range=70:80

# Multinomial logistic regression coefficients (excluding intercept which is used for estimation)
list Xmnl = mnl_encode(Xbase, unit, 1)
print unit Xbase Xmnl -o --range=70:80


